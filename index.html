<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1220" />
  <title>HCR2 Cups Chest Tracker</title>
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1>HCR2 Cups Chest Tracker</h1>
        <p>Tap <b>Next chest</b> after you open one in-game. Or use <b>Next milestone</b> to jump to the next non-common chest (auto-marks the commons in between).</p>
      </div>
      <div class="pill" id="pill">
        <strong id="pillCycle">Cycle 1</strong>
        <span id="pillPos">• Next: #1</span>
      </div>
    </header>

    <div class="grid2">
      <section class="card">
        <div class="nextRow">
          <div id="nextIcon" aria-hidden="true"></div>
          <div class="nextInfo">
            <p class="big" id="nextName">—</p>
            <p class="small" id="nextMeta">—</p>
          </div>
        </div>

        <div class="stats">
          <div class="stat">
            <div class="k">Opened total</div>
            <div class="v" id="openedTotal">0</div>
            <div class="s" id="openedTotalSub">Across all cycles</div>
          </div>
          <div class="stat">
            <div class="k">In this cycle</div>
            <div class="v" id="openedCycle">0 / 111</div>
            <div class="s" id="openedCycleSub">0% complete</div>
          </div>
        </div>

        <div class="progressWrap">
          <div class="bar" aria-label="Cycle progress">
            <div id="barFill"></div>
          </div>
          <div class="barLabel">
            <span id="toMilestone">Next milestone: —</span>
            <span id="cycleRange">1–111</span>
          </div>
        </div>

        <div class="seqHeader" style="margin-top:14px;">
          <h2>Upcoming milestone chests</h2>
          <div class="hint">Non-common (gold / silver / purple / champion)</div>
        </div>
        <div class="milestones" id="milestones"></div>

        <details>
          <summary>Advanced: undo / reset / set progress</summary>
          <div class="adv">
            <div class="row">
              <button class="ghost" id="btnUndo">Undo</button>
              <button class="ghost" id="btnReset">Reset</button>
            </div>
            <div class="row">
              <label style="flex:1; min-width:220px;">
                <div class="note" style="margin-bottom:6px;">Set <b>opened total</b> (0 = start at Champion chest)</div>
                <input type="number" id="setOpened" min="0" step="1" inputmode="numeric" />
              </label>
              <button class="ghost" id="btnSetOpened">Set</button>
            </div>
            <p class="note">Tip: You can also tap a chest in the grid below to set the next chest to that position (confirmation required).</p>
          </div>
        </details>
      </section>

      <section class="card">
        <div class="seqHeader" style="margin-top:0;">
          <h2>Full sequence (111)</h2>
          <div class="hint">Next chest is highlighted</div>
        </div>
        <div class="sequence" id="sequenceGrid" aria-label="Chest sequence grid"></div>

        <div class="legend" aria-label="Legend">
          <span><span class="dot" style="background:var(--champion)"></span>Champion</span>
          <span><span class="dot" style="background:var(--rare)"></span>Rare (gold)</span>
          <span><span class="dot" style="background:var(--uncommon)"></span>Uncommon (silver)</span>
          <span><span class="dot" style="background:var(--epic)"></span>Epic (purple)</span>
          <span><span class="dot" style="background:var(--common)"></span>Common (brown)</span>
        </div>
      </section>
    </div>
  </div>

  <div class="bottomBar" role="toolbar" aria-label="Actions">
    <div class="bottomInner">
      <button class="primary" id="btnNext">Next chest</button>
      <button class="secondary" id="btnMilestone">Next milestone</button>
    </div>
  </div>

  <script src="./scripts.js"></script>
    <!-- Custom confirm modal -->
  <div class="modal" id="confirmModal" aria-hidden="true">
    <div class="modal__backdrop" data-close></div>
    <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="confirmTitle" aria-describedby="confirmDesc">
      <div class="modal__title" id="confirmTitle">Confirm</div>
      <div class="modal__desc" id="confirmDesc">—</div>

      <div class="modal__actions">
        <button class="ghost" id="confirmCancel">Cancel</button>
        <button class="primary" id="confirmOk">OK</button>
      </div>
    </div>
  </div>
</body>
</html>
